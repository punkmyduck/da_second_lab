# Отчет о лабораторной работе №2
### По курсу: Основы Программирования
### Работу выполнил: студент группы №3131 Глуаков М.А.
## Цель работы:
Разработать и реализовать клиент-серверную информационную систему, реализующую механизм CRUD.
## Ход работы:
### Пользовательский интерфейс:
Пример:

![main](https://user-images.githubusercontent.com/122292517/212752013-29b35a5d-c2b0-4997-a703-c5eef8b1ca51.jpg)

Пример заметки без комментариев:

![comm](https://user-images.githubusercontent.com/122292517/212752030-0bf940cb-501e-4691-bef9-5a7b16d2be51.jpg)

### Пользовательский сценарий:

Пользователь записывает название и текст заметки, после чего нажимает кнопку отправить. Заметка отображается всем пользователям, кнопка **+** позволяет поставить "лайк" записи,
кнопка **-** - "дизлайк". Любой пользователь может оставить комментарий под любой заметкой, возле комментария, как и возле заметки, будет отображаться дата и время публикации.

### API сервера:
Сервер использует метод POST для реализации механизма CRUD. Используя метод POST удается размещать в базе данных заметки и комментарии под ними. Так как платформа абсолютно анонимная, то она не подразумевает удаление заметок и комментариев пользователями (только администрирование). 

### Хореография:
Пользователь заходит на сайт и видит возможность добавить новую заметку - поля для ввода **"title_of_note"** и **"text_of_note"**, после заполнения которых, он может нажать кнопку **"отправить"**, после чего пользователь будет перенаправлен на страницу **"donote.php"**, на которой в базу данных занесется информация с полей, введенных пользователем, а сам пользователь вернется обратно на **"home.php"**, где отобразятся новые заметки. Такой же механизм работает для комментариев под заметками на странице **"commentaries.php"**, для лайков на **"dolikes.php"** и дизлайков на **"dodislikes.php"**.

### Структура базы данных:
База данных состоит из двух таблиц:
- **"lab2"** со столбцами *"id"* (ключевой, автоинкремент), *"note_title"* (для хранения названия заметки), *"note_text"* (для хранения текста заметки), *"date"* (для хранения даты публикации), *"likes"* (для хранения поставленных на заметку лайков), *"dislikes"* (для хранения поставленных на заметку дизлакойв).
- **"commentaries"** со столбцами *"id"* (ключевой, автоинкремент), *"id_of_note"* (хранит айди заметки, под которой оставлен комментарий), *"comment"* (хранит текст комментария), *"date"* (хранит дату публикации комментария)

### Алгоритмы
Создание заметки:

![donote](https://user-images.githubusercontent.com/122292517/212758022-1b69c5ef-a7a0-4cfe-8ce8-7f3769b8458d.png)

Поставить лайк/дизлайк:

![likedislike](https://user-images.githubusercontent.com/122292517/212758286-a21f5fe4-5bf2-45c4-a05e-f6c886273568.png)

Добавить комментарий:

![comm](https://user-images.githubusercontent.com/122292517/212758653-801f379c-3ebc-4e1e-b4c8-4dff0e9cbb11.png)

### примеры HTTP запросов/ответов:
Создание заметки:

![example1](https://user-images.githubusercontent.com/122292517/212756787-245b5ea0-034e-454c-818b-cb151bb40a9f.png)

Добавление лайка:

![likes](https://user-images.githubusercontent.com/122292517/212757118-24ab0665-3e25-41c4-a0af-54d0b5244dcd.png)

Создание комментария:

![comment (1)](https://user-images.githubusercontent.com/122292517/212757300-f615465d-69c5-4f31-9280-553688d90440.png)

### Значимые фрагменты кода:
Создание заметки:

    $titleofnote=$_POST["title_of_note"];
    $textofnote=$_POST["text_of_note"];
    $sql = "INSERT INTO `lab2` (`note_title`, `note_text`) VALUES ('$titleofnote', '$textofnote');";
    $result=mysqli_query($connection, $sql);
    header('Location: home.php', true, 303);

Добавить лайк:

    if( isset( $_POST['likeonnote'] ) )
    {
        $id=$_POST["idofpost"];
        $likes=$_POST["likesofpost"]+1;
        $sqlforlikes = "UPDATE `lab2` SET `likes` = '$likes' WHERE `lab2`.`id` = '$id';";
        $resultforlikes=mysqli_query($connection, $sqlforlikes);
        header('Location: home.php', true, 303);
    }
    
Добавить комментарий:

    $textundercom=$_POST["comment"];
    $idofnote=$_POST["idofnote"];
    $sql = "INSERT INTO `commentaries` (`id_of_note`, `comment`) VALUES ('$idofnote', '$textundercom');";
    $result=mysqli_query($connection, $sql);
    header('Location: home.php', true, 303);
